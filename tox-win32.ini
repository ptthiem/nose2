[tox]
envlist=py26,py27,py32,py33,pypy19,docs,self26,cov26

[testenv:docs]
basepython=python2.7
changedir=docs
deps=-r{toxinidir}/requirements.txt
     -r{toxinidir}/requirements-docs.txt
commands=sphinx-build -W -b html -d {envtmpdir}/doctrees . {envtmpdir}/html

[testenv:jython]
basepython=jython

[testenv:pypy20]
basepython=c:\pypy-2.0-beta1\pypy.exe
deps=-r{toxinidir}/requirements.txt
     -r{toxinidir}/requirements-docs.txt
commands=python -m unittest discover []

[testenv:pypy19]
basepython=c:\pypy-1.9\pypy.exe
deps=-r{toxinidir}/requirements.txt
     -r{toxinidir}/requirements-docs.txt
commands=python -m unittest discover []

[testenv]
deps=-r{toxinidir}/requirements.txt
     -r{toxinidir}/requirements-docs.txt
     -r{toxinidir}/requirements-py26.txt
commands=unit2.exe discover []

[testenv:py27]
deps=-r{toxinidir}/requirements.txt
     -r{toxinidir}/requirements-docs.txt
commands=python -m unittest discover []

[testenv:py32]
deps=-r{toxinidir}/requirements.txt
     -r{toxinidir}/requirements-docs.txt
commands=python -m unittest discover []

[testenv:py33]
basepython=c:\python33\python.exe
deps=-r{toxinidir}/requirements.txt
     -r{toxinidir}/requirements-docs.txt
commands=python -m unittest discover []

[testenv:self26]
basepython=python2.6
deps=-r{toxinidir}/requirements.txt
     -r{toxinidir}/requirements-docs.txt
     -r{toxinidir}/requirements-py26.txt
setenv=PYTHONPATH={toxinidir}
commands=python -m nose2.__main__ []

[testenv:cov26]
basepython=python2.6
deps=coverage>=3.3
     -r{toxinidir}/requirements.txt
     -r{toxinidir}/requirements-docs.txt
     -r{toxinidir}/requirements-py26.txt
commands=coverage.exe erase
         coverage.exe run -L {envbindir}/unit2-script.py discover []
         coverage.exe report --include=*nose2* --omit=*nose2/tests*
         coverage.exe html -d cover --include=*nose2* --omit=*nose2/tests*
